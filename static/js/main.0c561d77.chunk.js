(this.webpackJsonpecommerceapp=this.webpackJsonpecommerceapp||[]).push([[0],{372:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(80),r=n.n(c),o=n(4),s=n(24),i=n(30),l=n(31),u=n(34),h=n(33),j=n(1),d=n(11),p=n.n(d),b=n(7),O=n(20),f=n(83);n(198),n(374),n(201);f.a.initializeApp({apiKey:"AIzaSyDdWvz_5PwlselhCHv8W7tawr3-7BR1evM",authDomain:"react-ptoject.firebaseapp.com",projectId:"react-ptoject",storageBucket:"react-ptoject.appspot.com",messagingSenderId:"679292841120",appId:"1:679292841120:web:c4eb11fc3717c68b7a6dc5",measurementId:"G-L3HKQMTF36"}),f.a.firestore().settings({timestampsInSnapshot:!0});var g=f.a,m=g.firestore().collection("projects"),x=function(){return function(){var e=Object(O.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.orderBy("createdAt","desc").get().then((function(e){var n=e.docs.map((function(e){return e.data()}));t({type:"SHOW_PROJECT_DATA",payload:n}),console.log("getdata successfully")})).catch((function(e){t({type:"SHOW_PROJECT_DATA_ERR",payload:e}),console.log({err:e})}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},v=n(8),y=n(82),N=n.n(y),_=Object(v.b)(null,(function(e){return{projectDetail:function(t){return e(function(e){return console.log({item:e},"projectDEtail"),{type:"PROJECT_DETAIL",payload:e}}(t))}}}))((function(e){var t=Object(o.g)();return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"project_summury_container",onClick:function(){t.push("/project/"+e.project.authorId),e.projectDetail(e.project)},children:[Object(j.jsx)("h2",{className:"title",children:e.project.title}),Object(j.jsx)("p",{className:"content",children:e.project.content}),Object(j.jsxs)("h3",{className:"author_name",children:["Posted by ",e.project.authorFirstName,e.project.authorLastName]}),Object(j.jsx)("p",{className:"date",children:N()(e.project.createdAt.toDate()).format("MMM Do YYYY,h:mm:ss a")})]})})})),C=n(190),w=Object(v.b)((function(e){return{isLoaded:e.project.isLoaded}}),(function(e){return{isLoadedAction:function(){return e((function(e,t){e({type:"IS_LOADED_ACTION"})}))}}}))((function(e){return console.log("props",e),console.log("prosLength",e.projects.length),Object(a.useEffect)((function(){e.isLoadedAction(),console.log("loaded")}),[]),Object(j.jsx)("div",{className:"projectlist",children:C.isLoaded?e.projects.length>=1?Object(j.jsx)("div",{children:e.projects.map((function(e,t){return Object(j.jsx)(_,{project:e},e.id)}))}):(console.log(e.projects.length),Object(j.jsx)(o.a,{to:"/createproject"})):Object(j.jsx)("p",{children:"project loading...."})})})),S=g.firestore().collection("users"),E=function(){return function(e,t){g.auth().onAuthStateChanged((function(t){console.log(t),e({type:"CHANGE_STATE",payload:t})}))}},D=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.showProjectData(),this.props.changeState(),console.log("dashchange")}},{key:"render",value:function(){var e=this.props,t=e.showData,n=e.auth;return console.log("dashauth",n),console.log("showData",t),Object(j.jsx)(j.Fragment,{children:n?Object(j.jsx)("div",{className:"dashboard_conrtainer",children:Object(j.jsx)("div",{className:"dashboard_conrtainer_center",children:Object(j.jsx)(w,{projects:t})})}):Object(j.jsx)(o.a,{to:"/signin"})})}}]),n}(a.Component),P=Object(v.b)((function(e){return{showData:e.project.showData,auth:e.auth.auth}}),(function(e){return{showProjectData:function(){return e(x())},changeState:function(){return e(E())}}}))(D),A=Object(v.b)((function(e){return{getUserCollection:e.auth.getUserCollection}}),(function(e){return{signOut:function(){return e((function(e,t){g.auth().signOut().then((function(){e({type:"SIGN_OUT"})}))}))},changeState:function(){return e(E())},getUserData:function(){return e((function(e,t){g.auth().onAuthStateChanged((function(t){var n=t.uid;console.log(n),S.doc(n).get().then((function(t){var n=t.data();e({type:"GET_USER_DATA",payload:n})}))}))}))}}}))((function(e){var t=e.getUserCollection;return console.log(t),Object(a.useEffect)((function(){console.log("useEffect"),e.getUserData()}),[]),Object(j.jsxs)("ul",{children:[Object(j.jsx)("div",{className:"initial",children:t.initials}),Object(j.jsx)("li",{children:Object(j.jsx)(s.b,{to:"/createproject",className:"nav_menu",children:"New Project"})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{onClick:function(){o.a,e.signOut(),console.log(e),e.changeState()},className:"nav_menu",children:"Log Out"})})]})})),T=function(){return Object(j.jsxs)("ul",{children:[Object(j.jsx)("li",{children:Object(j.jsx)(s.b,{to:"/signup",className:"nav_menu",children:"Signup"})}),Object(j.jsx)("li",{children:Object(j.jsx)(s.b,{to:"/signin",className:"nav_menu",children:"Login"})})]})},R=Object(v.b)((function(e){return{auth:e.auth.auth}}))((function(e){var t=e.auth?Object(j.jsx)(A,{}):Object(j.jsx)(T,{});return Object(j.jsxs)("div",{className:"nav",children:[Object(j.jsx)("div",{className:"logo_container",children:Object(j.jsx)(s.b,{to:"/",className:"nav_logo",children:"Project Plan"})}),Object(j.jsx)("div",{className:"nav_menu_container",children:t})]})})),I=Object(v.b)((function(e){return console.log(e),{showProjectDetail:e.project.showProjectDetail,auth:e.auth.auth}}))((function(e){var t=Object(o.h)().id;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"project_detail_container",children:e.auth?Object(j.jsxs)("div",{className:"project_detail",children:[Object(j.jsxs)("h2",{className:"title",children:[e.showProjectDetail.title,"-",t]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{className:"content",children:e.showProjectDetail.content}),"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged."]}),Object(j.jsx)("div",{children:Object(j.jsxs)("h3",{className:"author_name",children:["Posted by ",e.showProjectDetail.authorFirstName," ",e.showProjectDetail.authorLastName]})}),Object(j.jsx)("p",{className:"date",children:N()(e.showProjectDetail.createdAt.toDate()).format("MMM Do YYYY,h:mm:ss a")})]}):Object(j.jsx)(o.a,{to:"/signin"})})})})),L=n(32),k=function(e){var t=Object(a.useRef)(),n=Object(a.useRef)();return Object(j.jsxs)("div",{className:"input_container",children:[Object(j.jsx)("input",{type:e.type,id:e.id,onChange:e.onChange,ref:t,onClick:function(){0===t.current.value.length&&(n.current.style.transform="translateY(-20px)")},onBlur:function(){0===t.current.value.length&&(n.current.style.transform="none")}}),Object(j.jsx)("label",{htmlFor:e.id,ref:n,children:e.labelName})]})},U=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(L.a)({},t.target.id,t.target.value))},e.handleSubmit=function(){var t=Object(O.a)(p.a.mark((function t(n){var a,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),console.log(e.state),t.next=4,e.props.signIn(e.state);case 4:a=e.props,c=a.history,r=a.auth,console.log(r),c.push("/");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.changeState(),console.log("chngecomponent")}},{key:"render",value:function(){var e=this,t=this.props,n=t.authErr,a=t.auth;return Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsxs)("div",{className:"sign_in_container",children:[Object(j.jsxs)("form",{onSubmit:function(t){e.handleSubmit(t),console.log(a)},children:[Object(j.jsx)("p",{className:"sign_head",children:"Sign In"}),Object(j.jsx)(k,{type:"email",labelName:"email",id:"email",onChange:this.handleChange}),Object(j.jsx)(k,{type:"password",labelName:"password",id:"password",onChange:this.handleChange}),Object(j.jsx)("div",{className:"input_container",children:Object(j.jsx)("button",{className:"btn",children:"Log in"})})]}),Object(j.jsx)("div",{className:"error",children:n?Object(j.jsx)("p",{children:n}):null}),Object(j.jsx)("p",{children:a?a.email:""})]})})}}]),n}(a.Component),G=Object(v.b)((function(e){return{authErr:e.auth.authError,auth:e.auth.auth}}),(function(e){return{signIn:function(t){return e(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(n,a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,g.auth().signInWithEmailAndPassword(e.email,e.password).then((function(){n({type:"LOGIN_SUCCESS"}),console.log("login success")})).catch((function(e){n({type:"LOGIN_ERROR",payload:e}),console.log("login err")}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},changeState:function(){return e(E())}}}))(U),F=n(376),J=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:"",firstName:"",lastName:"",id:Object(F.a)()},e.handleChange=function(t){e.setState(Object(L.a)({},t.target.id,t.target.value))},e.handleSubmit=function(){var t=Object(O.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.props.signUp(e.state);case 3:e.props.history.push("/"),console.log(e.state);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.changeState(),console.log("singupChangeState")}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsx)("div",{className:"sign_up_container",children:Object(j.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(j.jsx)("p",{className:"sign_head",children:"Sign up"}),Object(j.jsx)(k,{type:"email",labelName:"email",id:"email",onChange:this.handleChange}),Object(j.jsx)(k,{type:"password",labelName:"password",id:"password",onChange:this.handleChange}),Object(j.jsx)(k,{type:"text",id:"firstName",onChange:this.handleChange,labelName:"FirstName"}),Object(j.jsx)(k,{type:"text",id:"lastName",onChange:this.handleChange,labelName:"LastName"}),Object(j.jsx)("div",{className:"input_container",children:Object(j.jsx)("button",{className:"btn",children:"Sign up"})})]})})})}}]),n}(a.Component),M=Object(v.b)((function(e){return console.log("signup",e),{auth:e.auth.auth}}),(function(e){return{signUp:function(t){return e(function(e){return function(){var t=Object(O.a)(p.a.mark((function t(n,a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){console.log("response",t.user.uid),S.doc(t.user.uid).set({id:t.user.uid,authorFirstName:e.firstName,authorLastName:e.lastName,initials:e.firstName[0]+e.lastName[0],createdAt:new Date}).then((function(){n({type:"SIGNUP_SUCCESS"});var e=g.firestore().collection("users").doc(g.auth().currentUser.uid);console.log(e,"getuserdata")})).catch((function(e){n({type:"SIGNUP_ERR",payload:e})}))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},changeState:function(){return e(E())}}}))(J),Y=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={title:"",content:""},e.handleChange=function(t){e.setState(Object(L.a)({},t.target.id,t.target.value))},e.handleSubmit=function(){var t=Object(O.a)(p.a.mark((function t(n){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.props.getUserCollection,t.next=4,e.props.createProject(e.state,a);case 4:return console.log("creategetuser",a),t.next=7,e.props.showProjectData();case 7:e.props.history.push("/");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.textarea=Object(a.createRef)(),e.createProjectLabel=Object(a.createRef)(),e.changeTextareaStyle=function(){console.log(e.textarea),0===e.textarea.current.value.length&&(e.createProjectLabel.current.style.transform="translateY(-20px)")},e.changeLabelstyle=function(){0===e.textarea.current.value.length&&(e.createProjectLabel.current.style.transform="none")},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.auth;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"wrapper",children:e?Object(j.jsx)("div",{className:"sign_in_container",children:Object(j.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(j.jsx)("h5",{className:"sign_head",children:"Create New Project"}),Object(j.jsx)(k,{type:"text",id:"title",onChange:this.handleChange,labelName:"Title"}),Object(j.jsxs)("div",{className:"input_container",children:[Object(j.jsx)("textarea",{cols:"20",rows:"5",id:"content",onChange:this.handleChange,ref:this.textarea,onClick:this.changeTextareaStyle,onBlur:this.changeLabelstyle}),Object(j.jsx)("label",{htmlFor:"content",ref:this.createProjectLabel,children:"Create Project"})]}),Object(j.jsx)("div",{className:"input_container",children:Object(j.jsx)("button",{className:"btn",children:"Create Project"})})]})}):Object(j.jsx)(o.a,{to:"/signin"})})})}}]),n}(a.Component),H=Object(v.b)((function(e){return{auth:e.auth.auth,getUserCollection:e.auth.getUserCollection,showData:e.project.showData}}),(function(e){return{createProject:function(t,n){return e(function(e,t){return function(){var n=Object(O.a)(p.a.mark((function n(a,c){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.doc(t.id).set(Object(b.a)(Object(b.a)({},e),{},{authorFirstName:t.authorFirstName,authorLastName:t.authorLastName,authorId:t.id,initial:t.initials,createdAt:new Date})).then((function(){a({type:"CREATE_PROJECT",payload:e}),console.log("success")})).catch((function(e){a({type:"CREATE_PROJECT_ERROR",payload:e}),console.log({err:e})}));case 2:m.onSnapshot((function(e){console.log(e)}));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(t,n))},getNotification:function(){return e((function(e,t){var n=g.messaging();n.onMessaging(),n.requestPermission().then((function(){return n.getToken()})).then((function(t){console.log("token",t),e({type:"GET_NOTIFICATION",payload:t})}))}))},showProjectData:function(){return e(x())}}}))(Y),W=function(){var e=Object(v.c)((function(e){return{auth:e.auth.auth}}));return Object(a.useEffect)((function(){e&&"/signin"!==window.location.pathname&&o.a}),[]),Object(j.jsx)("div",{className:"app_container",children:Object(j.jsxs)(s.a,{children:[Object(j.jsx)(R,{}),Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{exact:!0,path:"/",component:P}),Object(j.jsx)(o.b,{exact:!0,path:"/project/:id",component:I}),Object(j.jsx)(o.b,{path:"/signin",component:G}),Object(j.jsx)(o.b,{path:"/signup",component:M}),Object(j.jsx)(o.b,{path:"/createproject",component:H})]})]})})},B=(n(372),n(35)),z={authError:null,auth:null,getUserCollection:[]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login error"),Object(b.a)(Object(b.a)({},e),{},{authError:"Login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(b.a)(Object(b.a)({},e),{},{authError:null});case"CHANGE_STATE":return Object(b.a)(Object(b.a)({},e),{},{auth:t.payload});case"SIGN_OUT":return console.log("signOutSuccess"),e;case"SIGNUP_SUCCESS":return console.log("Singupsuccess"),Object(b.a)(Object(b.a)({},e),{},{authError:null});case"SIGNUP_ERR":return Object(b.a)(Object(b.a)({},e),{},{authError:t.payload});case"GET_USER_DATA":return console.log("getuser",t.payload),Object(b.a)(Object(b.a)({},e),{},{getUserCollection:t.payload});default:return e}},q={projects:[{id:1,title:"Help me find peach",content:"blh blah blah"},{id:2,title:"collect all stars",content:"bjbcjs mnbncj"},{id:3,title:"egg hunt",content:"ndjkhjk mcjk"}],showData:[],showProjectDetail:[],isLoaded:!1},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT":case"CREATE_PROJECT_ERROR":return e;case"SHOW_PROJECT_DATA":return Object(b.a)(Object(b.a)({},e),{},{showData:t.payload});case"SHOW_PROJECT_DATA_ERR":return e;case"PROJECT_DETAIL":return Object(b.a)(Object(b.a)({},e),{},{showProjectDetail:t.payload});case"IS_LOADED_ACTION":return console.log("isLoaded"),Object(b.a)(Object(b.a)({},e),{},{isLoaded:!0});case"GET_NOTIFICATION":default:return e}},V=Object(B.c)({auth:K,project:Q}),X=n(191),Z=Object(B.e)(V,Object(B.d)(Object(B.a)(X.a)));r.a.render(Object(j.jsx)(v.a,{store:Z,children:Object(j.jsx)(W,{})}),document.getElementById("root"))}},[[373,1,2]]]);
//# sourceMappingURL=main.0c561d77.chunk.js.map